# 仓库管理系统 (Warehouse Management System)

## 项目概述

这是一个完整的仓库管理系统，包含数据库设计和Python实现。系统支持多仓库管理、货物出入库、库存跟踪、供应商管理和操作员管理等功能。

## 项目结构

```
Test02ForPythonAndSQL/
├── ConceptualDataModel_1.pdm    # PowerDesigner概念数据模型
├── SQLQuery1.sql               # 数据库建表脚本（已添加详细注释）
├── warehouse_management.py     # Python实现演示脚本
└── README.md                   # 项目说明文档
```

## 系统功能

### 核心功能
- 🏢 **多仓库管理**：支持多个仓库的独立管理
- 📥 **入库管理**：记录货物入库信息，自动更新库存
- 📤 **出库管理**：记录货物出库信息，自动扣减库存
- 📊 **库存跟踪**：实时监控各仓库库存状态
- 👥 **操作员管理**：管理系统操作员信息
- 🏭 **供应商管理**：维护供应商信息和供应关系
- 🔒 **数据完整性**：通过外键约束确保数据一致性

### 业务流程
1. **入库流程**：供应商 → 入库记录 → 库存更新
2. **出库流程**：库存检查 → 出库记录 → 库存扣减
3. **库存管理**：实时跟踪各仓库的货物库存
4. **供应商管理**：维护供应商信息及供应关系

## 数据库设计

### 表结构说明

| 表名 | 中文名 | 主要功能 | 关键字段 |
|------|--------|----------|----------|
| `cangku` | 仓库表 | 存储仓库基本信息 | `cangkumingcheng` (主键) |
| `caozuoyuan` | 操作员表 | 管理系统操作员 | `xingming` (主键) |
| `kucun` | 库存表 | 记录当前库存状态 | `bianhao` (主键) |
| `ruku` | 入库表 | 记录入库操作 | `rukubianhao` (主键) |
| `chuku` | 出库表 | 记录出库操作 | `chukubianhao` (主键) |
| `gongyingshang` | 供应商表 | 管理供应商信息 | `gongyingshangbianhao` (主键) |
| `gongying` | 供应关系表 | 管理供应商与仓库关系 | 复合主键 |

### 关系图
```
操作员 (caozuoyuan) ←→ 仓库 (cangku) ←→ 库存 (kucun)
                                    ↓
供应商 (gongyingshang) ←→ 供应关系 (gongying) ←→ 仓库 (cangku)
                                    ↓
                             入库 (ruku) ←→ 库存 (kucun)
                                    ↓
                             出库 (chuku) ←→ 库存 (kucun)
```

## 安装和使用

### 环境要求
- Python 3.6+
- SQLite3 (Python内置)

### 快速开始

1. **克隆或下载项目**
   ```bash
   cd Test02ForPythonAndSQL
   ```

2. **运行Python演示脚本**
   ```bash
   python warehouse_management.py
   ```

3. **查看运行结果**
   脚本将自动：
   - 创建数据库和表结构
   - 插入示例数据
   - 演示入库和出库操作
   - 显示库存状态和仓库汇总

### 使用SQL脚本

如果需要使用原始SQL脚本：

1. **使用SAP SQL Anywhere 17**
   ```sql
   -- 直接执行SQLQuery1.sql文件
   ```

2. **使用其他数据库**
   - 需要根据具体数据库调整语法
   - 主要修改数据类型和约束语法

## Python API 说明

### 主要类和方法

#### WarehouseManagementSystem 类

```python
# 初始化系统
wms = WarehouseManagementSystem("warehouse.db")

# 连接数据库
wms.connect_database()

# 创建表结构
wms.create_tables()

# 插入示例数据
wms.insert_sample_data()
```

#### 核心操作方法

```python
# 添加操作员
wms.add_operator("张三", "13800138001")

# 添加仓库
wms.add_warehouse("新仓库", "张三", "张主任")

# 添加库存
wms.add_inventory("INV005", "新仓库", 100, 50.00)

# 处理入库
wms.process_inbound(
    inbound_code="IN003",
    inventory_code="INV005",
    goods_code="GOODS003",
    quantity=50,
    name="新商品",
    price=100.00,
    supplier="新供应商"
)

# 处理出库
wms.process_outbound(
    outbound_code="OUT003",
    inventory_code="INV005",
    goods_code="GOODS003",
    quantity=20,
    name="新商品",
    price=100.00
)
```

#### 查询方法

```python
# 获取库存状态
inventory = wms.get_inventory_status()

# 获取仓库汇总
summary = wms.get_warehouse_summary()

# 打印库存状态
wms.print_inventory_status()

# 打印仓库汇总
wms.print_warehouse_summary()
```

## 示例输出

运行 `warehouse_management.py` 后的典型输出：

```
🚀 仓库管理系统演示
==================================================
✅ 数据库连接成功
✅ 数据库表创建成功
✅ 示例数据插入成功

============================================================
📊 当前库存状态
============================================================
库存编号      仓库名称      数量     单价        负责人    
------------------------------------------------------------
INV001       主仓库        100     50.0        张主任    
INV002       主仓库        200     30.0        张主任    
INV003       分仓库A       150     80.0        李主任    
INV004       分仓库B       80      120.0       王主任    

================================================================================
🏢 仓库汇总信息
================================================================================
仓库名称      负责人      操作员      库存种类  总数量    总价值        
--------------------------------------------------------------------------------
主仓库        张主任      张三        2         300       11000.0      
分仓库A       李主任      李四        1         150       12000.0      
分仓库B       王主任      王五        1         80        9600.0       

==================================================
📥 演示入库操作
==================================================
✅ 入库操作 IN001 处理成功
✅ 入库操作 IN002 处理成功

==================================================
📤 演示出库操作
==================================================
✅ 出库操作 OUT001 处理成功
✅ 出库操作 OUT002 处理成功

==================================================
📊 操作后的状态
==================================================
库存编号      仓库名称      数量     单价        负责人    
------------------------------------------------------------
INV001       主仓库        130     50.0        张主任    
INV002       主仓库        270     30.0        张主任    
INV003       分仓库A       150     80.0        李主任    
INV004       分仓库B       80      120.0       王主任    

================================================================================
🏢 仓库汇总信息
================================================================================
仓库名称      负责人      操作员      库存种类  总数量    总价值        
--------------------------------------------------------------------------------
主仓库        张主任      张三        2         400       13100.0      
分仓库A       李主任      李四        1         150       12000.0      
分仓库B       王主任      王五        1         80        9600.0       

🔒 数据库连接已关闭

==================================================
✅ 仓库管理系统演示完成
==================================================
```

## 技术特点

### 数据库设计
- **规范化设计**：符合第三范式，避免数据冗余
- **外键约束**：确保数据完整性和一致性
- **索引优化**：提高查询性能
- **中文支持**：UTF-16编码，支持中文字段名

### Python实现
- **面向对象设计**：清晰的类结构和方法组织
- **异常处理**：完善的错误处理机制
- **类型提示**：使用TypeScript风格的类型注解
- **详细注释**：中文注释，易于理解和维护

## 扩展建议

### 功能扩展
1. **用户认证**：添加登录和权限控制
2. **报表功能**：生成库存报表和统计图表
3. **条码扫描**：集成条码扫描功能
4. **移动端支持**：开发移动应用
5. **Web界面**：开发Web管理界面

### 技术扩展
1. **数据库迁移**：支持MySQL、PostgreSQL等
2. **API接口**：提供RESTful API
3. **缓存机制**：使用Redis提高性能
4. **日志系统**：记录操作日志
5. **备份恢复**：数据备份和恢复功能

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

### 开发环境设置
1. Fork项目
2. 创建功能分支
3. 提交更改
4. 创建Pull Request

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交GitHub Issue
- 发送邮件至项目维护者

---

**注意**：这是一个演示项目，生产环境使用前请进行充分测试和安全评估。 