这是一个库存小程序项目，项目需求如下：

本项目技术栈设计如下：
1. 仓储小程序前端
   - 开发框架：微信小程序原生框架
   - 状态管理:微信小程序内置storage
   - 请求库:微信小程序内置request

2. 仓储小程序仓储管理系统（一体化方案）
   - 开发框架：Node.js + Express
   - 视图模板引擎：EJS
   - UI组件库：Vue.js + Element UI
   - 数据库：mySQL
   - 权限认证：Session + Cookie


3. 前端的后端API服务
   - 开发框架：Node.js + Express

三个服务的功能及具体设计如下：

1. 仓储管理系统前端设计

    【登录入口】
    - 用户首次进入系统需输入操作员代码（可自定义），前端通过API接口向后端发起身份校验，校验通过后进入首页。未登录状态下，后端需拦截所有非登录API请求，保证安全。

    【首页】
    - 展示所有已创建的仓库列表，前端通过API获取，支持实时刷新。
    - “新建仓库”操作通过API提交，前端仅传递必要信息（如仓库名称），后端自动补充创建时间和操作员信息。
    - 仓库卡片点击后，前端通过API获取仓库详情并跳转。

    【仓库详情页】
    - 顶部展示当前仓库名称及基础信息，数据由API获取。
    - 快捷操作按钮分别跳转至对应功能页面，所有数据交互均通过API完成：
        - 快捷入库
        - 快捷出库
        - 订单查询
        - 流水记录
        - 退出仓库（返回首页）

    【入库页面】
    - 支持微信扫码，扫码结果通过API获取商品信息并自动填充表单。
    - 也可手动填写商品信息，前端通过API校验商品编号等。
    - 提交时，前端将表单数据通过API发送，后端统一记录操作员代码和操作时间。
    - 入库成功后，前端提供“返回仓库详情”入口。

    【出库页面】
    - 支持微信扫码，扫码后通过API获取商品信息。
    - 手动输入商品编号时，前端通过API自动补全商品信息。
    - 填写出库数量后，前端通过API提交，后端统一记录操作员代码和操作时间。
    - 出库完成后，前端提供“返回仓库详情”入口。

    【订单查询页面】
    - 前端通过API支持多条件组合查询订单（订单编号、商品名称、日期、操作员编号等）。
    - 查询结果以列表形式展示，点击可通过API获取订单详情。
    - 页面提供“返回仓库详情”入口。

    【流水记录页面】
    - 前端通过API获取所有入库、出库流水记录，支持按时间、商品、价格等条件筛选。
    - 支持分页和快速检索，均由API参数控制。
    - 页面随时可点击“返回仓库详情”按钮。

    【用户体验与流程优化】
    - 所有页面均有明确的入口和返回路径，前后端通过约定的API和路由保证流程顺畅。
    - 扫码与手动录入均通过统一API接口处理，便于后端维护。
    - 查询与筛选条件通过API参数传递，保证灵活性和一致性。
    - 重要操作前，前端弹窗二次确认，后端也需校验防止误操作。

    【个人信息页面】
    - 前端通过API获取并展示用户头像、信息、操作码等个人信息。
    - 支持通过API查询个人操作记录。

2. 后台管理系统功能需求

    【登录与权限管理】
    - 管理员和操作员通过账号密码登录，前端通过API提交，后端统一校验权限。
    - 多角色管理，角色权限由后端统一控制，前端根据API返回权限渲染页面。
    - 用户角色的增删改查、权限分配均通过API实现。
    - 登录后可通过API修改个人密码，后端支持密码策略和定期更换。

    【仓库管理】
    - 仓库列表页通过API获取，支持分页、搜索、筛选，参数由前端传递，后端统一处理。
    - 新建/编辑仓库通过API提交，后端校验并保存。
    - 仓库详情页通过API获取详细信息及下属数据。
    - 删除仓库通过API逻辑删除，前端二次确认，后端校验已删除仓库不可操作。

    【商品管理】
    - 商品列表页通过API获取，支持多条件筛选、分页、导出。
    - 新建/编辑商品通过API提交，支持批量导入。
    - 商品详情页通过API获取详细信息及相关记录。
    - 删除商品通过API逻辑删除，前端二次确认，后端校验。

    【入库管理】
    - 入库单列表页通过API获取，支持多条件筛选、分页、导出。
    - 新建/编辑入库单通过API提交，支持扫码和手动录入，未审核单据可编辑。
    - 入库单详情页通过API获取详细信息及操作日志。
    - 审核与作废通过API操作，后端记录操作员及时间。

    【出库管理】
    - 出库单列表页通过API获取，支持多条件筛选、分页、导出。
    - 新建/编辑出库单通过API提交，支持扫码和手动录入，未审核单据可编辑。
    - 出库单详情页通过API获取详细信息及操作日志。
    - 审核与作废通过API操作，后端记录操作员及时间。

    【订单管理】
    - 订单列表页通过API获取，支持多条件组合查询、分页、导出。
    - 订单详情页通过API获取详细信息。
    - 编辑订单通过API提交，仅未完成订单可编辑。
    - 删除订单通过API逻辑删除，前端二次确认，后端校验。

    【流水记录管理】
    - 流水记录列表页通过API获取，支持筛选、分页、导出。
    - 流水详情页通过API获取详细信息及关联单据。
    - 支持流水数据的快速检索和导出，均通过API参数控制。

    【系统日志与操作审计】
    - 所有关键操作通过后端统一记录操作日志，包含操作员、时间、内容等。
    - 日志列表页通过API获取，支持筛选和导出。
    - 日志详情页通过API获取详细内容。

    【系统设置】
    - 基础数据维护、系统参数配置、数据备份与恢复均通过API实现，前端仅负责交互和参数传递。

    【界面层级关系说明】
    - “新建/编辑”页面均从对应“列表页”进入，操作完成后返回列表，前端通过路由和API配合实现。
    - “详情页”从“列表页”进入，支持返回上一级。
    - 编辑和详情页面均有返回列表入口，保证流程流畅。

    【安全与体验优化】
    - 重要操作（如删除、作废、审核）前端弹窗二次确认，后端API也需校验。
    - 所有页面均有明确入口和返回路径，支持面包屑导航。
    - 多条件筛选和批量操作通过API参数支持，提升效率。
    - 数据导出通过API统一处理，支持Excel、CSV等格式。

3. 前端API服务设计

3.1 小程序前端API

【用户与登录相关】
- /api/app/auth/login：操作员登录，前端提交操作员代码，后端校验并返回凭证。
- /api/app/auth/me：获取当前操作员信息。

【仓库管理】
- /api/app/warehouse/list：获取仓库列表，支持实时刷新。
- /api/app/warehouse/create：新建仓库，前端传递名称，后端补充操作员和时间。
- /api/app/warehouse/detail：获取仓库详情。

【商品入库】
- /api/app/product/scan：扫码获取商品信息，自动填充表单。
- /api/app/product/info：手动获取商品信息。
- /api/app/inbound/create：提交入库单，后端记录操作员和时间。

【商品出库】
- /api/app/product/scan：扫码获取商品信息（与入库共用）。
- /api/app/product/info：手动获取商品信息（与入库共用）。
- /api/app/outbound/create：提交出库单，后端记录操作员和时间。

【订单查询】
- /api/app/order/search：多条件组合查询订单。
- /api/app/order/detail：获取订单详情。

【流水记录】
- /api/app/flow/search：查询入库、出库流水记录，支持筛选、分页。
- /api/app/flow/detail：获取流水详情及关联单据。

---

3.2 管理后台API

【登录与权限管理】
- /api/admin/auth/login：后台用户登录。
- /api/admin/auth/me：获取当前后台用户信息及权限。
- /api/admin/role/list：获取角色列表。
- /api/admin/role/{create|update|delete}：角色增删改。
- /api/admin/user/list：获取后台用户列表，支持筛选、分页。
- /api/admin/user/{create|update|delete}：用户增删改。
- /api/admin/user/password：修改个人密码。

【仓库管理】
- /api/admin/warehouse/list：获取仓库信息，支持分页、搜索、筛选。
- /api/admin/warehouse/{create|update}：新建/编辑仓库。
- /api/admin/warehouse/detail：获取仓库详情及下属数据。
- /api/admin/warehouse/delete：逻辑删除仓库，删除前需二次确认。

【商品管理】
- /api/admin/product/list：获取商品信息，支持筛选、分页、导出。
- /api/admin/product/{create|update}：新建/编辑商品，支持批量导入。
- /api/admin/product/detail：获取商品详情及相关记录。
- /api/admin/product/delete：逻辑删除商品，删除前需二次确认。

【入库管理】
- /api/admin/inbound/list：获取入库单，支持筛选、分页、导出。
- /api/admin/inbound/{create|update}：新建/编辑入库单。
- /api/admin/inbound/detail：获取入库单详情及操作日志。
- /api/admin/inbound/{approve|cancel}：审核/作废入库单，记录操作员及时间。

【出库管理】
- /api/admin/outbound/list：获取出库单，支持筛选、分页、导出。
- /api/admin/outbound/{create|update}：新建/编辑出库单。
- /api/admin/outbound/detail：获取出库单详情及操作日志。
- /api/admin/outbound/{approve|cancel}：审核/作废出库单，记录操作员及时间。

【订单管理】
- /api/admin/order/list：获取订单，支持多条件查询、分页、导出。
- /api/admin/order/detail：获取订单详情。
- /api/admin/order/update：编辑未完成订单。
- /api/admin/order/delete：逻辑删除订单，删除前需二次确认。

【流水记录管理】
- /api/admin/flow/list：获取入库、出库流水记录，支持筛选、分页、导出。
- /api/admin/flow/detail：获取流水详情及关联单据。

【系统日志与操作审计】
- /api/admin/log/list：获取操作日志，支持筛选和导出。
- /api/admin/log/detail：获取日志详情。

【系统设置】
- /api/admin/settings/base：基础数据维护。
- /api/admin/settings/param：系统参数配置。
- /api/admin/settings/backup：数据备份与恢复。

【通用】
- /api/admin/export：数据导出（Excel、CSV等格式）。






